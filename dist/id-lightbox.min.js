"use strict";!function(){var t=function(t){this.elems=document.querySelectorAll(t),this.current=-1,this.overlay,this.container,this.galId,this.clickHandler=this.clickHandler.bind(this),this.destroy=this.destroy.bind(this),this.nextImg=this.nextImg.bind(this),this.prevImg=this.prevImg.bind(this);for(var e=0;e<this.elems.length;e++)this.elems[e].addEventListener("click",this.clickHandler);this.setupContentArea()};t.prototype.setupContentArea=function(){this.overlay=document.createElement("div"),this.overlay.classList.add("id-lightbox-overlay"),this.container=document.createElement("div"),this.container.classList.add("id-lightbox-container"),this.overlay.innerHTML='<span class="id-lightbox-close"></span>',this.overlay.addEventListener("click",this.destroy),this.overlay.querySelector(".id-lightbox-close").addEventListener("click",this.destroy)},t.prototype.setupControls=function(){this.container.innerHTML+='<span class="id-lightbox-next"></span><span class="id-lightbox-prev"></span>',this.container.querySelector(".id-lightbox-next").addEventListener("click",this.nextImg),this.container.querySelector(".id-lightbox-prev").addEventListener("click",this.prevImg)},t.prototype.clickHandler=function(t){var e=this;t.preventDefault();var i=void 0;if(this.galId=t.currentTarget.rel,this.galId){for(var r=document.querySelectorAll("[rel="+this.galId+"]"),n=0;n<r.length;n++)i=this.setupImage(r[n].href),r[n]===t.currentTarget&&(this.current=n,i.classList.add("id-lightbox-current")),this.container.appendChild(i);r.length>1&&this.setupControls()}else this.current=0,(i=this.setupImage(t.currentTarget.href)).classList.add("id-lightbox-current"),this.container.appendChild(i);document.body.appendChild(this.container),document.body.appendChild(this.overlay),setTimeout(function(){e.container.classList.add("visible"),e.overlay.classList.add("visible")},50)},t.prototype.setupImage=function(t){var e=new Image;return e.src=t,e.classList.add("id-lightbox-image"),e},t.prototype.destroy=function(t){t.preventDefault(),this.overlay.remove(),this.container.remove(),this.setupContentArea()},t.prototype.nextImg=function(t){t.preventDefault();var e=this.container.querySelectorAll(".id-lightbox-image"),i=this.container.querySelector(".id-lightbox-current");this.current=this.current<e.length-1?this.current+1:0,i.classList.remove("id-lightbox-current"),e[this.current].classList.add("id-lightbox-current")},t.prototype.prevImg=function(t){t.preventDefault();var e=this.container.querySelectorAll(".id-lightbox-image"),i=this.container.querySelector(".id-lightbox-current");this.current=this.current<=0?e.length-1:this.current-1,i.classList.remove("id-lightbox-current"),e[this.current].classList.add("id-lightbox-current")},"undefined"!=typeof module&&void 0!==module.exports?module.exports=t:window.IDLightbox=t}();